# 6. 컴포넌트 반복
2020-04-18

## 자바스크립트 배열의 map() 함수
자바스크립트 배열 객체의 내장 함수인 map 함수를 사용하여 반복되는 컴포넌트를 렌더링할 수 있다. map 함수는 파라미터로 전달된 함수를 사용해서 배열 내 각 요소를 원하는 규칙에 따라 변환한 후 그 결과로 새로운 배열을 생성한다.

### 문법
```javascript
arr.map(callback, [thisArg])
```

- callback: 새로운 배열의 요소를 생성하는 함수로 파라미터는 다음 세 가지이다.
  - currentValue: 현재 처리하고 있는 요소
  - index: 현재 처리하고 있는 요소의 index 값
  - array: 현재 처리하고 있는 원본 배열
- thisArg(선택 항목): callback 함수 내부에서 사용할 this 레퍼런스

### 예제
```javascript
var numbers = [1, 2, 3, 4, 5];

var processed = numbers.map(function(num) {
    return num * num;
});
console.log(processed);
```

ES6
```javascript
const numbers = [1, 2, 3, 4, 5];
const result = numbers.map(num => num * num);
console.log(result);
```

## 데이터 배열을 컴포넌트 배열로 변환하기
<코드 참고>

map 함수에서 JSX 작성할 때는 앞서 다룬 예제처럼 DOM 요소를 작성해도 되고 컴포넌트를 사용해도 된다.

## key
리액트에서의 key는 컴포넌트 배열을 렌더링했을 때 어떤 원소에 변동이 있었는지 알아내기 위해 사용한다.

key가 없을 때는 Virtual DOM을 비교하는 과정에서 리스트를 순차적으로 비교하면서 변화를 감지하나, key가 있다면 이 값을 사용하여 어떤 변화가 일어났는지 더욱 빠르게 알아낼 수 있다.

### key 설정
map 함수의 인자로 전달되는 함수 내부에서 컴포넌트 props를 설정하듯이 설정하면 된다. key값은 unique해야 하므로, 데이터가 가진 고유값을 key값으로 설정해야 한다.

고유값이 없는 경우, map 함수에 전달되는 콜백 함수의 인수인 index 값을 사용한다. index를 key로 사용하면 배열이 변경될 때 효율적으로 리렌더링하지 못한다.

## 응용

## 정리